
<div class="banner-show" style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)), url(https://images.unsplash.com/photo-1606733847546-db8546099013?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1872&q=80);">
  <div class="show-game-info">
    <div class="show-game-names">
      <div class="game-event-name">
        <h2><%= @event.name %></h2>
        <h3><%= @event.game.name %></h3>
        <h3><%= @event.date %></h3>
        <h4><%= @event.description %></h4>
      </div>
    </div>
    <div class="show-game-players">
      <div class="game-players-avatars">
        <% @event.users.accepted.each do |user| %>
          <button type="button" class="avatar-bordered"data-bs-toggle="modal" data-bs-target="#user-<%=user.id%>">
          <%= cl_image_tag user.profile_pic.key, class: "avatar-bordered", alt: "avatar-bordered" %>
          </button>
            <!-- Modal -->
            <div class="modal fade" id="user-<%=user.id%>" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="user-<%=user.id%>Label" aria-hidden="true">
              <div class="modal-dialog ">
                <div class="modal-content modal-joe">
                  <div class="modal-header">
                    <h5 class="modal-title modal-text" id="user-<%=user.id%>Label"><%= user.username %></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body ">
                  <ul>
                  <p>Player's name:</p>
                  <li><%= user.first_name.capitalize %><%=  user.second_name.capitalize %></li>
                  <p></p>
                  <p>Player's Bio:</p>
                  <li><%= user.bio %></li>
                  <p></p>
                  <p>Player's email:</p>
                  <li><%= user.email %></li>

                  </ul>
                  </div>
                  <%# <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Understood</button> %>
                  <%# </div> %>
                </div>
              </div>
            </div>

        <% end %>
        <% @open_capacity.times do %>
          <%= image_tag "open_user", class: "avatar-bordered", alt: "avatar-bordered" %>
        <% end %>
      </div>
    </div>
  </div>
  <div class="show-game-status">
    <div class="game-status">
      <% if @event.users.accepted.include? current_user %>
        <h5>You are signed up for this game</h5>
      <% elsif @event.users.include? current_user %>
        <h5>Your invitation is still pending...</h5>
      <% elsif @event.users.accepted.count < @event.capacity && @event.user != current_user %>
          <%= simple_form_for [@event, @player] do |f| %>
            <%= f.button :submit, "join event", class: "btn btn-primary"%>
          <% end %>
      <% elsif @event.owner?(current_user)%>
            <%= link_to finish_event_path(@event) do%>
          <h5>End Game</h5>
        <% end %>
      <% else %>
        <h5>Game is full</h5>
      <% end %>
    </div>
  </div>
</div>

<% # chatoom  %>

<div class = btn-primary style="text-align: center">
  <% if @event.users.accepted.include? current_user %>
    <%= link_to "Group messages", event_messages_path(@event) %>
  <% end %>
</div>
<br>
<br>

<h4 style="text-align: center">Events that are also playing: <%= @event.game.name %></h4>
<br>
<br>

<div id="card-carousel" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active">
    <% @similar_events.each_with_index do |event, index| %>
      <% if index < 4 %>
      <%= render "card", event: event %>
      <% end %>
    <% end %>
    </div>
    <% if @similar_events.size > 4 %>
    <div class="carousel-item">
      <% @similar_events.each_with_index do |event, index| %>
      <% if index > 3 && index < 8 %>
      <%= render "card", event: event %>
      <% end %>
    <% end %>
    </div>
    <% end %>
    <% if @similar_events.size > 8 %>
    <div class="carousel-item">
      <% @similar_events.each_with_index do |event, index| %>
      <% if index > 7 && index < 12 %>
      <%= render "card", event: event %>
      <% end %>
    <% end %>
    </div>
    <% end %>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#card-carousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#card-carousel" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>
