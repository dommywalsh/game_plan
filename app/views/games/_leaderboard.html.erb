<div class="p-2 d-flex">
  <div class="container">
  <br>
    <h4 style="text-align: center"> <%= game.name %> Leaderboard</h4>
    <br>
    <table class="table">
      <thead>
        <tr>
          <th class="text-center" scope="col"></th>
          <th class="text-center" scope="col">#</th>
          <th class="text-center" scope="col">First</th>
          <th class="text-center" scope="col">Last</th>
          <th class="text-center" scope="col">Rating</th>
        </tr>
      </thead>
      <tbody data-controller="counter">
        <% game.user_ratings.sort_by{ |player| player.rating }.reverse.each_with_index do |player, index| %>
          <tr class="counter-value" akhi="<%=player.rating%>">
            <th class="text-center" style="vertical-align: middle">
              <% if player.user.profile_pic && player.user.profile_pic.key %>
                <%= cl_image_tag player.user.profile_pic.key, class: "avatar-large" %>
              <% else %>
                <!-- Render default image -->
                <%= image_tag "person-icon.png", class: "avatar-large" %>
              <% end %>
            </th>
            <th class="text-center" style="vertical-align: middle" scope="row"><%= index + 1 %></th>
            <th class="text-center" style="vertical-align: middle"><%= player.user.first_name %></th>
            <th class="text-center" style="vertical-align: middle"><%= player.user.second_name %></th>
            <th id="rating" class="text-center" style="vertical-align: middle"><%= player.rating %></th>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
